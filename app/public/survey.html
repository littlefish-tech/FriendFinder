<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Do the Survey</title>
  <!-- Latest compiled and minified CSS & JS -->
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="https://kit.fontawesome.com/78df251e9f.js" crossorigin="anonymous"></script>
 
</head>

<body style = "background-color: #F2AF1D;">
  <!-- <script type="text/javascript" src="js/friendApp.js"></script> -->

  <div class="container">

    <h1 style = "font-weight: bold; font-style: Oswald; margin-top: 30px;"><span class="fas fa-poll-h"></span>  Survey Questions</h1>
    <hr>
    <div class="form-group">
      <p style = "font-family: sans-serif; font-size: 30px;"><span class="fas fa-child"></span>  About You</p>
      <p>****************************************************************************</p>
      
      <label for="survey-name" style = "font-size: 25px;">Name(Required)</label>
      <br>
      <input type="text" style = "font-size: 25px; width: 500px;" placeholder="Your name" id="survey-name" required>
    </div>
    <label for="url" style = "font-size: 25px;">Link to Photo Image (Required)</label>
    <br>
    <input type="url" style = "font-size: 25px;width: 500px;" name="url" id="survey-url" placeholder="https://example.com" pattern="https://.*" size="30" required>
    <hr>
    <div class="survey-group">
      <!-- <p style = "font-size: 25px;">Question 1</p> -->
      <p style = "font-size: 20px;">Q1. How do you like winter?</p>
      <h6>
        <select class="selectScore" id="q1">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
      <br>
      <!-- <p style = "font-size: 25px;">Question 2</p> -->
      <p style = "font-size: 20px;">Q2. Do you think ddrink a lot of water is good for your health?</p>

      <h6>
        <select class="selectScore" id="q2">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
      <br>
      <!-- <p style = "font-size: 25px;">Question 3</p> -->
      <p style = "font-size: 20px;">Q3. Fried rice is one of the most popular Chinese food.</p>
      <h6>
        <select class="selectScore" id="q3">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
      <br>
      <!-- <p style = "font-size: 25px;">Question 4</p> -->
      <p style = "font-size: 20px;">Q4. Do you like eating chocolate?</p>
      <h6>
        <select class="selectScore" id="q4">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
      <br>
      <!-- <p style = "font-size: 25px;">Question 5</p> -->
      <p style = "font-size: 20px;">Q5. Will you choose to eat hotpot in winter?</p>
      <h6>
        <select class="selectScore" id="q5">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
      <br>
      <!-- <p style = "font-size: 25px;">Question 6</p> -->
      <p style = "font-size: 20px;">Q6. Enough sleeping hours is very important to people</p>
      <h6>
        <select class="selectScore" id="q6">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
      <br>
      <!-- <p style = "font-size: 25px;">Question 7</p> -->
      <p style = "font-size: 20px;">Q7. Dinner is the most important meal in a day.</p>
      <h6>
        <select class="selectScore" id="q7">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
      <br>
      <!-- <p style = "font-size: 25px;">Question 8</p> -->
      <p style = "font-size: 20px;">Q8. Breakfast is the most important meal in a day.</p>
      <h6>
        <select class="selectScore" id="q8">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
      <br>
      <!-- <p style = "font-size: 25px;">Question 9</p> -->
      <p style = "font-size: 20px;">Q9. Will you go beach this weekend?</p>
      <h6>
        <select class="selectScore" id="q9">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
      <br>
      <!-- <p style = "font-size: 25px;">Question 10</p> -->
      <p style = "font-size: 20px;">Q10. Peanuts are good for our health.</p>
      <h6>
        <select class="selectScore" id="q10">
          <option default>Select an Option</option>
          <option value="1">1 (Strongly Disagree)</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5 (Strongly Agree)</option>
        </select>
      </h6>
    </div>
    <br>

    <button type="button" class="btn btn-lg btn-block submit" style = "background-color: #5A5C4F; color: white;">Submit</button>
    <div class="modal" id = "matchFriendModal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">The most match friend</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <h3 id = "matchFriend"></h3>
            <img id = "matchFriendPhoto" src = "#" style = "height: 100px; width: 100px;"></img>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <footer class="footer" style = "font-size: 20px; font-weight: bold; color: black; margin-top: 10px;">
    <div class="container">
      <p style = "font-size: 20px; font-weight: bold; color: black;"><a href="/api/friends" style = "font-size: 20px; font-weight: bold; color: black;">API Friends List</a> | <a href="https://github.com/littlefish-tech/FriendFinder" style = "font-size: 20px; font-weight: bold; color: black;">Github Repo</a>
    </div>
  </footer>

  </div>


</body>

</html>

<!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->

<script>

$(".submit").on("click", function(event) {
    event.preventDefault();
    //var selectElement = document.getElementsByClassName("selectScore")
    // Here we grab the form elements
    
     
    var newSurvey = {
      friendsName: $("#survey-name").val().trim(),
      friendsPhoto: $("#survey-url").val(),
      friendsScoreArr: [
        $("#q1").val()[0].trim(),
        $("#q2").val()[0].trim(),
        $("#q3").val()[0].trim(),
        $("#q4").val()[0].trim(),
        $("#q5").val()[0].trim(),
        $("#q6").val()[0].trim(),
        $("#q7").val()[0].trim(),
        $("#q8").val()[0].trim(),
        $("#q9").val()[0].trim(),
        $("#q10").val()[0].trim()
      ]
    };
  

    console.log(newSurvey);


    // This line is the magic. It"s very similar to the standard ajax function we used.
    // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
    // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
    // depending on if a tables is available or not.


  if (newSurvey.friendsScoreArr === "S" || $("#survey-name").val() === "" || $("#survey-url").val() === "") {
    alert("You must fill in all forms")
  }
  else {

    $.post("/api/friends", newSurvey,
      function (data) {
        $("#matchFriend").text(data.friendsName);
        $("#matchFriendPhoto").attr("src", data.friendsPhoto);
        $("#matchFriendModal").modal("toggle");

        //alert("Your best match friend")

        // Clear the form when submitting
        $("#survey-name").val("");
        $("#survey-url").val("");
        $(".selectScore").val("Select an Option");

      });

  }
  });
</script>